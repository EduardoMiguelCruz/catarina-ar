<!DOCTYPE html>
<html>

<head>
    <title>Catarina Freitas da Cruz</title>
    <script src="src/aframe.min-1.3.0.js"></script>
    <script src="src/aframe-ar.3.4.0.js"></script>    
    <script src="src/aframe-multisrc-component-0.3.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B6FVRVRFXK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-B6FVRVRFXK');
    </script>
    <script>
        function preview() {
            frame.src = URL.createObjectURL(event.target.files[0]);
        }
        function clearImage() {
            document.getElementById('formFile').value = null;
            frame.src = "";
        }
    </script>
    <style>
        @font-face {
            font-family: 'Comfortaa';
            src: url('Comfortaa-Regular.ttf');
        }
    </style>
</head>
<!-- https://au.gmented.com/app/marker/marker.php -->
<body style='margin : 0px; overflow: hidden;'>
    <a-scene embedded 
        vr-mode-ui="enabled: false;"
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">
        <div id="markers"></div>
        <!-- define a simple camera -->
        <a-entity camera></a-entity>
    </a-scene>
    <div style="position: fixed; height: 25vh; width: 100vw; top:0; left: 0; display: flex; flex-direction: row;">
        <img src="https://lh3.googleusercontent.com/sU5wSmwNBzRNDVGx7hbdsZOeiAy9cTBMyhbXMwqm0uaabWDu3j6TOWlDj54_vCC1wZmjuL6feAiha31l63pa6xOh_SVVf3SNnwxLchbsH7E0gw38AnYMp2VXWVwpQvDz-wKSPwSqS30=w2400"  height="100%"/>
        <div style="flex: 1 1 auto; display: flex; align-items: center; justify-content: center;">
            <h1 style="font-family: Comfortaa; color: #7559A1; background-color: rgba(112, 150, 87, 0.8); margin-left: 16px; word-wrap: break-word; text-align: center;">Obrigado pela tua presença</h1>
        </div>
    </div>
    <div style="position: fixed; width: 100vw; bottom: 16px; left: 0; display: flex; flex-direction: row;">
        <div style="flex: 1 1 auto; display: flex; align-items: flex-end; justify-content: center;">
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#dedicatoriaModal">
                Deixa-nos uma dedicatória
            </button>
        </div>
    </div>

    <script src="src/main.js" type="module"></script>
    <!-- Modal -->
    <div class="modal fade" id="dedicatoriaModal" tabindex="-1" aria-labelledby="dedicatoriaModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Deixa-nos uma dedicatória</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form class="row needs-validation" novalidate>
                        <div class="mb-3 d-flex flex-column">
                            <label for="Image" class="form-label">Deixa-nos uma foto tua</label>
                            <input class="form-control" type="file" id="formFile" hidden onchange="preview()">
                            <button onclick="clearImage()" class="btn btn-primary mt-3">Carregar foto</button>
                            <img id="frame" src="" class="img-fluid" />
                        </div>
                        
                        <div class="mb-3">
                            <label for="exampleFormControlTextarea1" class="form-label">Escreve aqui a tua dedicatória</label>
                            <textarea class="form-control" id="exampleFormControlTextarea1" rows="8" required></textarea>
                            <div class="invalid-feedback">
                                Please choose a username.
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Enviar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        (function () {
            'use strict'

            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.querySelectorAll('.needs-validation')

            // Loop over them and prevent submission
            Array.prototype.slice.call(forms)
                .forEach(function (form) {
                    form.addEventListener('submit', function (event) {
                        if (!form.checkValidity()) {
                            event.preventDefault()
                            event.stopPropagation()
                        }

                        form.classList.add('was-validated')
                    }, false)
                })
            }
        )()
    </script>
</body>

</html>